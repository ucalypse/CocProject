@using System.Web.UI.WebControls
@model CurrentWar
@{
    ViewBag.Title = "War Room";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>War Room</h2>
<body>
    <div class="jumbotron">
        @if (Model.State == "inWar")
        {
            <h2 id="warMessage">Time Until War Ends</h2>
        }
        else
        {
            <h2>Time Until War Begins</h2>
        }

        <div id="renderTime"></div>
    </div>
<div id="popupContact" class="modal">
    <div class="modal-content">
        <span class="close" id="closeButton">&times;</span>
        @using (Html.BeginForm("SendWarPlan", "Home"))
        {
            <div class="form-group">
                @Html.TextBox("Member")
                <input type="text" class="form-control" placeholder="Member Name"/>
                <textarea style="height: 300px;" class="form-control" placeholder="Enter War Plan"></textarea>
                <input type="submit"/>
            </div>
        }
        
    </div>
</div>
<div id="displayWarPlan" class="col-md-6">
    <h3>The War Plan...</h3>
    <button class="btn-group-sm" id="button">Add War Plan (Admin Only)</button>
    <img src="~/Content/Images/parchment.jpg" height="700" width="500"/>
</div>
</body>
<script>
    $(function() {
        $.getJSON('/Home/ConvertedDateTime')
            .done(function(response) {
                var countDownDate = new Date(response).getTime();
                var x = setInterval(function() {

                        var now = new Date().getTime();

                        var distance = countDownDate - now;

                        var seconds = Math.floor((distance / 1000) % 60);
                        var minutes = Math.floor((distance / 1000 / 60) % 60);
                        var hours = Math.floor((distance / (1000 * 60 * 60)));

                        $("#renderTime").html(
                            (hours + 8) + "h " + minutes + "m " + seconds + "s ");

                        if (distance < 0) {
                            clearInterval(x);
                            $("#renderTime").html("War Over");
                        }
                },
                1000);
            });
        $("#button").click(function() {
            $("#popupContact").css("display", "block");
        });

        $("#closeButton").click(function () {
            $("#popupContact").css("display", "none");
        });
    });
   
   
</script>

